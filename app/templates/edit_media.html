{% extends "layout.html" %}
{% block title %}Edit Chapter{% endblock %}

{% block layoutleft %}
<div  style="margin:5px">
    <div>
        <a class="dropdown-item" href="{{url_for('edit_collection', id=chapter.collection_id)}}#manage-chapter">Tr·ªü v·ªÅ qu·∫£n l√Ω t√°c ph·∫©m</a>
        <a class="dropdown-item" href="{{url_for('public_media', id=chapter.id)}}#manage-chapter">ƒê·ªçc ch∆∞∆°ng n√†y</a>
        <button class="dropdown-item" onclick="showMedia(this)" value="edit_chapter">Ch·ªânh s·ª≠a</button>
        <button class="dropdown-item" onclick="showMedia(this)" value="chapter_statistic">Th√¥ng tin th·ªëng k√™</button>
    </div>
</div>
{% endblock %}
{% block layoutcenter %}
<div class="card"> 
    <div class="card-body">
        <div class="tab-content" id="tab-content">

            <div class="tab-pane active show" id="edit_chapter">
                <div class="alert" role="alert" id="alert-theme">
                    <h4 class="alert-heading"  id="alert-information"> M·ªói m·ª•c ƒë·ªÅu ri√™ng bi·ªát. Khi ch·ªânh s·ª≠a xong vui l√≤ng nh·∫•n enter </h4>
                </div>
                <div class="form-group">
                    <label for="chapter_name">Ti√™u ƒë·ªÅ ch∆∞∆°ng</label>
                    <input type="text" class="form-control" name="chapter_name" id="chapter_name" value="{{chapter.name}}">
                    <!-- <label for="chapter_order">Th·ª© t·ª±</label>
                    <input type="text" class="form-control" name="chapter_order" id="chapter_order" value="{{chapter.chapter_order}}"> -->

                </div>
                {% include "_editorjs.html" %}
            </div>
            <div class="tab-pane" id="chapter_statistic">
                <h1> S·ªë li·ªáu ch∆∞∆°ng </h1>
                L∆∞·ª£t ƒë·ªçc: 
                <span class="badge bg-cyan">
                    {{chapter.view}} üëÅ views
                </span> </a> 
            </div>
        </div>
    </div>
</div>
<script>
    let input = document.getElementById('edit_chapter').querySelectorAll('.form-control')
    for (let i=0; i<input.length;i++) {
        input[i].addEventListener('change', (e)=>{
            axios.post('', {type:e.target.name, value:e.target.value})
            .then((res)=>{
                document.getElementById('alert-information').textContent='Result: ' + res.data;
                document.getElementById('alert-theme').className = 'alert alert-success';
            })
            .catch((err)=>{
                document.getElementById('alert-information').textContent=err.message
                document.getElementById('alert-theme').className = 'alert alert-danger'
            })
        })
    }
    function saveContent(context) {
        console.log('test')
    }
</script>
{% endblock %}
{% block layoutright %}

{% endblock %}
